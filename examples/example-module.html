<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSPT Example - ES Module</title>
    <link rel="stylesheet" href="../dist/jspt.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #1a1a1a;
            color: #fff;
        }
        h1 {
            margin-bottom: 10px;
        }
        .subtitle {
            color: #888;
            margin-bottom: 30px;
        }
        .button-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        button {
            padding: 12px 24px;
            font-size: 16px;
            border: none;
            border-radius: 8px;
            background: #0066ff;
            color: white;
            cursor: pointer;
            transition: all 0.2s;
        }
        button:hover {
            background: #0052cc;
            transform: translateY(-2px);
        }
        button:active {
            transform: translateY(0);
        }
        .section {
            margin: 40px 0;
        }
        .section h2 {
            margin-bottom: 15px;
            color: #0066ff;
        }
        .code-block {
            background: #2a2a2a;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            overflow-x: auto;
        }
        code {
            color: #61dafb;
            font-family: 'Courier New', monospace;
        }
    </style>
</head>
<body>
    <h1>JSPT Library - ES Module Example</h1>
    <p class="subtitle">Using import statements for modern JavaScript applications</p>

    <div class="code-block">
        <code>import { makeToast, makePopup } from './jspt.module.js';</code>
    </div>
    
    <div class="section">
        <h2>Toast Examples</h2>
        <div class="button-grid">
            <button id="basicToast">Basic Toast</button>
            <button id="successToast">Success Toast</button>
            <button id="errorToast">Error Toast</button>
            <button id="customToast">Custom Toast</button>
        </div>
    </div>

    <div class="section">
        <h2>Popup Examples</h2>
        <div class="button-grid">
            <button id="textPopup">Text Popup</button>
            <button id="htmlPopup">HTML Popup</button>
            <button id="dataPopup">Data Display</button>
            <button id="formPopup">Form Example</button>
        </div>
    </div>

    <div class="section">
        <h2>Advanced Examples</h2>
        <div class="button-grid">
            <button id="chainedToasts">Chained Toasts</button>
            <button id="progressToast">Progress Toast</button>
            <button id="confirmPopup">Confirm Dialog</button>
            <button id="asyncOperation">Async Operation</button>
        </div>
    </div>

    <script type="module">
        import { makeToast, makePopup } from '../dist/jspt.module.js';

        document.getElementById('basicToast').addEventListener('click', () => {
            makeToast({
                message: "ES Module import working perfectly!"
            });
        });

        document.getElementById('successToast').addEventListener('click', () => {
            makeToast({
                message: "Operation successful!",
                icon_left: "check_circle",
                icon_left_type: "google_material_rounded",
                duration: 3000
            });
        });

        document.getElementById('errorToast').addEventListener('click', () => {
            makeToast({
                style: "default-error",
                message: "Error: Something went wrong",
                icon_left: "error",
                icon_left_type: "google_material_rounded",
                duration: 5000
            });
        });

        document.getElementById('customToast').addEventListener('click', () => {
            makeToast({
                message: "Custom styled toast with emoji",
                icon_left: "ðŸš€",
                icon_left_type: "emoji",
                icon_right: "close",
                icon_right_type: "google_material_rounded",
                duration: 6000
            });
        });

        document.getElementById('textPopup').addEventListener('click', () => {
            makePopup({
                content_type: "text",
                header: "ES Module Demo",
                title: "Modern JavaScript",
                message: "This popup was created using ES6 module imports for cleaner, more maintainable code.",
                close_on_blur: true
            });
        });

        document.getElementById('htmlPopup').addEventListener('click', () => {
            makePopup({
                content_type: "html",
                header: "Rich Content",
                content: `
                    <h2>ES Module Benefits</h2>
                    <ul>
                        <li>âœ… Tree-shaking support</li>
                        <li>âœ… Better code organization</li>
                        <li>âœ… Native browser support</li>
                        <li>âœ… Full TypeScript support</li>
                    </ul>
                    <p style="color: #888; font-size: 14px; margin-top: 20px;">
                        Import only what you need for optimal bundle size.
                    </p>
                `,
                close_on_blur: true
            });
        });

        document.getElementById('dataPopup').addEventListener('click', () => {
            const userData = {
                name: "John Doe",
                email: "john@example.com",
                role: "Developer"
            };

            makePopup({
                content_type: "html",
                header: "User Information",
                content: `
                    <div style="line-height: 1.8;">
                        <p><strong>Name:</strong> ${userData.name}</p>
                        <p><strong>Email:</strong> ${userData.email}</p>
                        <p><strong>Role:</strong> ${userData.role}</p>
                    </div>
                `,
                close_on_blur: true
            });
        });

        document.getElementById('formPopup').addEventListener('click', () => {
            makePopup({
                content_type: "html",
                header: "Quick Form",
                content: `
                    <form id="quickForm" style="display: flex; flex-direction: column; gap: 10px;">
                        <input type="text" placeholder="Name" style="padding: 8px; border-radius: 4px; border: 1px solid #555; background: #2a2a2a; color: #fff;">
                        <input type="email" placeholder="Email" style="padding: 8px; border-radius: 4px; border: 1px solid #555; background: #2a2a2a; color: #fff;">
                        <button type="submit" style="padding: 10px; background: #0066ff; color: white; border: none; border-radius: 4px; cursor: pointer;">
                            Submit
                        </button>
                    </form>
                `,
                close_on_blur: false
            });

            setTimeout(() => {
                const form = document.getElementById('quickForm');
                if (form) {
                    form.addEventListener('submit', (e) => {
                        e.preventDefault();
                        makeToast({
                            message: "Form submitted successfully!",
                            icon_left: "check",
                            duration: 3000
                        });
                        document.querySelector('.popup-container').remove();
                    });
                }
            }, 100);
        });

        document.getElementById('chainedToasts').addEventListener('click', () => {
            makeToast({
                message: "Step 1: Starting process...",
                icon_left: "hourglass_empty",
                duration: 2000
            });

            setTimeout(() => {
                makeToast({
                    message: "Step 2: Processing data...",
                    icon_left: "sync",
                    duration: 2000
                });
            }, 2000);

            setTimeout(() => {
                makeToast({
                    message: "Step 3: Complete!",
                    icon_left: "check_circle",
                    duration: 3000
                });
            }, 4000);
        });

        document.getElementById('progressToast').addEventListener('click', () => {
            let progress = 0;
            const toastId = 'progress-toast';

            const interval = setInterval(() => {
                progress += 10;
                
                if (progress <= 100) {
                    makeToast({
                        custom_id: toastId,
                        message: `Progress: ${progress}%`,
                        icon_left: "autorenew",
                        duration: -1,
                        close_on_click: false
                    });
                } else {
                    clearInterval(interval);
                    makeToast({
                        custom_id: toastId,
                        message: "Complete!",
                        icon_left: "check_circle",
                        duration: 2000
                    });
                }
            }, 500);
        });

        document.getElementById('confirmPopup').addEventListener('click', () => {
            makePopup({
                content_type: "html",
                header: "Confirm Action",
                content: `
                    <p>Are you sure you want to proceed?</p>
                    <div style="display: flex; gap: 10px; margin-top: 20px;">
                        <button id="confirmYes" style="flex: 1; padding: 10px; background: #0066ff; color: white; border: none; border-radius: 4px; cursor: pointer;">
                            Yes
                        </button>
                        <button id="confirmNo" style="flex: 1; padding: 10px; background: #666; color: white; border: none; border-radius: 4px; cursor: pointer;">
                            No
                        </button>
                    </div>
                `,
                close_on_blur: true
            });

            setTimeout(() => {
                document.getElementById('confirmYes')?.addEventListener('click', () => {
                    makeToast({
                        message: "Action confirmed!",
                        icon_left: "check",
                        duration: 2000
                    });
                    document.querySelector('.popup-container').remove();
                });

                document.getElementById('confirmNo')?.addEventListener('click', () => {
                    makeToast({
                        message: "Action cancelled",
                        icon_left: "close",
                        duration: 2000
                    });
                    document.querySelector('.popup-container').remove();
                });
            }, 100);
        });

        document.getElementById('asyncOperation').addEventListener('click', async () => {
            makeToast({
                custom_id: 'async-op',
                message: "Fetching data...",
                icon_left: "cloud_download",
                duration: -1
            });

            try {
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                makeToast({
                    custom_id: 'async-op',
                    message: "Data fetched successfully!",
                    icon_left: "check_circle",
                    duration: 3000
                });

                makePopup({
                    content_type: "html",
                    header: "Async Result",
                    content: `
                        <h3>Data Retrieved</h3>
                        <p>The async operation completed successfully.</p>
                        <pre style="background: #2a2a2a; padding: 10px; border-radius: 4px; overflow-x: auto;">
{
  "status": "success",
  "timestamp": "${new Date().toISOString()}",
  "data": "Sample data"
}</pre>
                    `,
                    close_on_blur: true
                });
            } catch (error) {
                makeToast({
                    custom_id: 'async-op',
                    style: "default-error",
                    message: "Failed to fetch data",
                    icon_left: "error",
                    duration: 5000
                });
            }
        });
    </script>
</body>
</html>
